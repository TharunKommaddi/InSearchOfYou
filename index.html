<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Book For You</title>
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Hind+Guntur:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* CSS from styles.css and inline styles */
        :root {
            --background-color: #222;
            --text-color: #333;
            --accent-color: #e74c3c;
            --letter-bg: #f3e9d8;
            --letter-shadow: 0 10px 30px rgba(0,0,0,0.3);
            --ink-color: #2c3e50;
            --page-turn-speed: 0.6s;
        }

        body, html {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, 'Comic Sans MS', cursive, sans-serif;
            width: 100%;
            height: 100%;
            background-color: var(--background-color);
            color: var(--text-color);
            overflow: hidden;
            position: relative;
        }

        /* Book container */
        .book-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            perspective: 1500px;
        }

        /* Page styling */
        .page {
            position: absolute;
            width: 85%;
            max-width: 400px;
            height: 85%;
            max-height: 80vh;
            background-color: var(--letter-bg);
            padding: 40px;
            border-radius: 5px;
            box-shadow: var(--letter-shadow);
            overflow-y: auto;
            transform-origin: left center;
            transition: transform var(--page-turn-speed) ease, box-shadow var(--page-turn-speed) ease;
            background-image: 
                linear-gradient(90deg, rgba(0,0,0,0.03) 1px, transparent 1px),
                linear-gradient(rgba(0,0,0,0.03) 1px, transparent 1px);
            background-size: 20px 20px;
            z-index: 1;
            backface-visibility: hidden;
            -webkit-overflow-scrolling: touch;
        }

        /* Old paper texture */
        .page::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAMbWlDQ1BJQ0MgUHJvZmlsZQAASImVVwdYU8kWnluSkJDQAghICb0J0gkgJYQWQHoRbIQkQCgxBoKKHVlUcC2oiGBFV0UUO2BnUez2sih2XSyoDMoiKrbKNwuQXfd93/vON3f+98w5c/535sxMJgOAeifPbC6F1QDINOXJo4L9aeMS42ikZ0AHFKABHnDiCRRmVnh4KMBotv69vLsOEMneVUdR65/9f2MKwpRMASPUxmmCFEEmA3AlAJcJFPN5ADCquX3pfHMJRqyTF0qA2KYEp8h...');
            opacity: 0.2;
            pointer-events: none;
            border-radius: 5px;
            z-index: -1;
        }

        /* Coffee stain effect */
        .page::after {
            content: '';
            position: absolute;
            top: 10%;
            right: 15%;
            width: 100px;
            height: 100px;
            background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJyZ2JhKDEzOSwgNjksIDIwLCAwLjA4KSIgZD0iTTUwLDUgQzcwLDUgOTAsMjUgOTAsNDUgQzkwLDcwIDcwLDk1IDUwLDk1IEMzMCw5NSAxMCw3MCAxMCw0NSBDMTAsMjUgMzAsNSA1MCw1IFoiLz48L3N2Zz4=');
            opacity: 0.7;
            transform: rotate(15deg);
            pointer-events: none;
            z-index: -1;
        }

        .page.hidden {
            display: none;
        }

        /* Letter content styling */
        .letter-content {
            font-family: 'Indie Flower', 'Comic Sans MS', cursive, sans-serif;
            font-size: 1.2rem;
            line-height: 1.8;
            color: var(--ink-color);
        }

        /* Cover page specific styling */
        .cover-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            text-align: center;
            color: #f3e9d8;
        }

        .cover-content h1 {
            font-family: 'Indie Flower', 'Comic Sans MS', cursive, sans-serif;
            font-size: 3rem;
            margin-bottom: 2rem;
            color: #f3e9d8;
        }

        .heart-icon {
            font-size: 5rem;
            margin-bottom: 2rem;
        }

        .heart-icon.small {
            font-size: 3rem;
        }

        .author {
            font-family: 'Indie Flower', 'Comic Sans MS', cursive, sans-serif;
            font-size: 1.5rem;
            margin-top: 2rem;
            font-style: italic;
        }

        /* Book cover style */
        #page-0 {
            background: linear-gradient(45deg, #5c1c1c 0%, #843028 100%);
            box-shadow: 0 15px 40px rgba(0,0,0,0.5);
        }

        #page-0::before {
            background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1IiBoZWlnaHQ9IjUiPgo8cmVjdCB3aWR0aD0iNSIgaGVpZ2h0PSI1IiBmaWxsPSIjZmZmIiBmaWxsLW9wYWNpdHk9IjAuMSI+PC9yZWN0Pgo8L3N2Zz4=');
            background-size: 5px 5px;
            opacity: 0.3;
        }

        #page-0::after {
            display: none;
        }

        /* Back cover style */
        .back-cover {
            background: linear-gradient(45deg, #843028 0%, #5c1c1c 100%);
        }

        .quote {
            font-family: 'Indie Flower', 'Comic Sans MS', cursive, sans-serif;
            font-size: 1.5rem;
            font-style: italic;
            max-width: 80%;
            line-height: 1.6;
        }

        .ending {
            font-family: 'Indie Flower', 'Comic Sans MS', cursive, sans-serif;
            font-size: 1.2rem;
            margin-top: 2rem;
        }
        
        /* Page corners for navigation */
        .page-corner {
            position: absolute;
            width: 60px;
            height: 60px;
            bottom: 20%;
            z-index: 1000;
            cursor: pointer;
            opacity: 0.5;
            transition: opacity 0.3s ease;
        }

        .page-corner:hover {
            opacity: 1;
        }

        .page-corner.left {
            left: 20px;
            border-radius: 0 0 100% 0;
            background: radial-gradient(circle at top left, transparent 60%, rgba(255,255,255,0.3) 100%);
        }

        .page-corner.right {
            right: 20px;
            border-radius: 0 0 0 100%;
            background: radial-gradient(circle at top right, transparent 60%, rgba(255,255,255,0.3) 100%);
        }
        
        /* Page number display */
        .page-number {
            position: absolute;
            bottom: 20px;
            left: 0;
            right: 0;
            text-align: center;
            color: rgba(255,255,255,0.7);
            font-size: 0.9rem;
            z-index: 1000;
        }

        /* Swipe instruction */
        .swipe-instruction {
            position: absolute;
            bottom: 60px;
            left: 0;
            right: 0;
            text-align: center;
            color: rgba(255,255,255,0.7);
            font-size: 0.9rem;
            background-color: rgba(0,0,0,0.5);
            padding: 6px 10px;
            border-radius: 20px;
            max-width: 300px;
            margin: 0 auto;
            opacity: 1;
            transition: opacity 0.5s ease;
            z-index: 1000;
        }

        .swipe-instruction.hidden {
            opacity: 0;
        }

        /* Index page styling */
        .index-page ol {
            padding-left: 20px;
        }

        .index-page li {
            margin-bottom: 15px;
            position: relative;
        }

        .index-link {
            cursor: pointer;
            color: var(--accent-color);
            transition: color 0.3s ease, transform 0.2s ease;
            display: block;
            padding: 4px 0;
            position: relative;
        }

        .index-link:hover {
            transform: translateX(5px);
            color: #c0392b;
        }

        .index-link::before {
            content: "•";
            display: inline-block;
            width: 15px;
            color: var(--accent-color);
            margin-right: 8px;
            font-weight: bold;
        }

        .index-link::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--accent-color);
            transition: width 0.3s ease;
        }

        .index-link:hover::after {
            width: 100%;
        }

        /* Realistic page turning effect */
        .page-flip-container {
            position: absolute;
            width: 100%;
            height: 100%;
            perspective: 2000px;
            pointer-events: none;
            z-index: 1500;
        }
        
        .page-flipper {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            pointer-events: none;
        }
        
        .page-front, .page-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            background-color: var(--letter-bg);
            background-image: 
                linear-gradient(90deg, rgba(0,0,0,0.03) 1px, transparent 1px),
                linear-gradient(rgba(0,0,0,0.03) 1px, transparent 1px);
            background-size: 20px 20px;
            box-shadow: var(--letter-shadow);
        }
        
        .page-front::before, .page-back::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAMbWlDQ1BJQ0MgUHJvZmlsZQAASImVVwdYU8kWnluSkJDQAghICb0J0gkgJYQWQHoRbIQkQCgxBoKKHVlUcC2oiGBFV0UUO2BnUez2sih2XSyoDMoiKrbKNwuQXfd93/vON3f+98w5c/535sxMJgOAeifPbC6F1QDINOXJo4L9aeMS42ikZ0AHFKABHnDiCRRmVnh4KMBotv69vLsOEMneVUdR65/9f2MKwpRMASPUxmmCFEEmA3AlAJcJFPN5ADCquX3pfHMJRqyTF0qA2KYEp8h...');
            opacity: 0.2;
            pointer-events: none;
        }
        
        .page-back {
            transform: rotateY(180deg);
        }
        
        .page-fold {
            position: absolute;
            width: 0;
            height: 0;
            border-style: solid;
            pointer-events: all;
            cursor: pointer;
            z-index: 2000;
            transition: all 0.3s ease;
        }
        
        .page-fold.right-bottom {
            right: 15px;
            bottom: 15px;
            border-width: 0 0 20px 20px;
            border-color: transparent transparent rgba(0,0,0,0.1) transparent;
            transform: rotate(0deg);
        }
        
        .page-fold.left-bottom {
            left: 15px;
            bottom: 15px;
            border-width: 0 0 20px 20px;
            border-color: transparent transparent rgba(0,0,0,0.1) transparent;
            transform: rotate(270deg);
        }
        
        .page-fold:hover {
            border-width: 0 0 30px 30px;
        }
        
        @keyframes turnPageRight {
            0% { transform: rotateY(0); transform-origin: left center; }
            50% { transform: rotateY(-60deg) translateX(-5%); transform-origin: left center; }
            100% { transform: rotateY(-180deg); transform-origin: left center; }
        }
        
        @keyframes turnPageLeft {
            0% { transform: rotateY(0); transform-origin: right center; }
            50% { transform: rotateY(60deg) translateX(5%); transform-origin: right center; }
            100% { transform: rotateY(180deg); transform-origin: right center; }
        }
        
        .turning-right .page-flipper {
            animation: turnPageRight 1.2s ease-in-out forwards;
        }
        
        .turning-left .page-flipper {
            animation: turnPageLeft 1.2s ease-in-out forwards;
        }
        
        .page-shadow {
            position: absolute;
            top: 0;
            opacity: 0;
            height: 100%;
            width: 100%;
            background: linear-gradient(to right, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0) 100%);
            pointer-events: none;
        }
        
        .turning-right .page-shadow, .turning-left .page-shadow {
            animation: shadowMove 1.2s ease-in-out;
        }
        
        @keyframes shadowMove {
            0% { opacity: 0; }
            25% { opacity: 0.5; }
            75% { opacity: 0.5; }
            100% { opacity: 0; }
        }

        .quick-transition {
            transition: opacity 0.3s ease;
        }
        
        @media (max-width: 768px) {
            .page {
                padding: 25px 20px;
                width: 90%;
            }
            .letter-content {
                font-size: 1.1rem;
                line-height: 1.6;
            }
            .page-corner {
                width: 40px;
                height: 40px;
            }
            .cover-content h1 {
                font-size: 2.5rem;
            }
            .heart-icon {
                font-size: 4rem;
            }
            .swipe-instruction {
                bottom: 40px;
            }
        }
    </style>
</head>
<body>
    <div class="book-container">
        <div class="page" id="page-0">
            <div class="cover-content">
                <h1>For Tanuja</h1>
                <div class="heart-icon">❤️</div>
                <p class="author">From Tharun</p>
            </div>
        </div>
        
        <div class="page hidden" id="page-1">
            <div class="letter-content">
                <h2>Acknowledgement</h2>
                <p>These letters are a collection of my deepest thoughts and feelings, written in moments of both joy and longing.</p>
                <p>Each page is a piece of my heart, dedicated to you - Tanuja.</p>
                <p>May these words remind you of how truly special you are, and how much you mean to me.</p>
            </div>
        </div>

        <div class="page hidden" id="page-2">
            <div class="letter-content index-page">
                <h2>Index</h2>
                <ol>
                    </ol>
            </div>
        </div>

        <div class="page hidden" id="page-3"><div class="letter-content"></div></div>
        <div class="page hidden" id="page-4"><div class="letter-content"></div></div>
        <div class="page hidden" id="page-5"><div class="letter-content"></div></div>
        <div class="page hidden" id="page-6"><div class="letter-content"></div></div>
        <div class="page hidden" id="page-7"><div class="letter-content"></div></div>
        <div class="page hidden" id="page-8"><div class="letter-content"></div></div>
        <div class="page hidden" id="page-9"><div class="letter-content"></div></div>
        <div class="page hidden" id="page-10"><div class="letter-content"></div></div>
        <div class="page hidden" id="page-11"><div class="letter-content"></div></div>
        <div class="page hidden" id="page-12"><div class="letter-content"></div></div>
        <div class="page hidden" id="page-13"><div class="letter-content"></div></div>
        <div class="page hidden" id="page-14"><div class="letter-content"></div></div>
        <div class="page hidden" id="page-15"><div class="letter-content"></div></div>
        <div class="page hidden" id="page-16"><div class="letter-content"></div></div>
        <div class="page hidden" id="page-17"><div class="letter-content"></div></div>
        <div class="page hidden" id="page-18"><div class="letter-content"></div></div>
        <div class="page hidden" id="page-19"><div class="letter-content"></div></div>
        <div class="page hidden" id="page-20"><div class="letter-content"></div></div>
        <div class="page hidden" id="page-21"><div class="letter-content"></div></div>
        
        <div class="page hidden" id="page-22">
            <div class="cover-content back-cover">
                <p class="quote">"This is not just a memory...
                It's a declaration etched on the spine of my life,
                where you don't exist beside me — you exist within me.
                Not in silence, not in softness, not in distance…
                but in every space your love carved into my being.
                When love becomes spiritual, physical presence is not needed - because its essence becomes eternal, woven into the soul."</p>
                
                <div class="heart-icon small">❤️</div>
                <p class="ending">The End</p>
            </div>
        </div>
        
        <div class="page-corner left" id="prev-corner"></div>
        <div class="page-corner right" id="next-corner"></div>
        
        <div class="swipe-instruction" id="swipe-instruction">
            Swipe or tap corners to turn pages
        </div>
        
        <div class="page-number" id="page-number"></div>
    </div>

    <script>
        // JavaScript from script.js
        document.addEventListener('DOMContentLoaded', function() {
            // Variables
            let currentPage = 0;
            const totalPages = 23;
            let isAnimating = false;
            
            // Elements
            const pages = document.querySelectorAll('.page');
            const prevCorner = document.getElementById('prev-corner');
            const nextCorner = document.getElementById('next-corner');
            const pageNumber = document.getElementById('page-number');
            const swipeInstruction = document.getElementById('swipe-instruction');
            const bookContainer = document.querySelector('.book-container');
            
            if (!bookContainer) {
                console.error('Book container not found!');
                return;
            }
            
            // Create page flip container
            const pageFlipContainer = document.createElement('div');
            pageFlipContainer.className = 'page-flip-container';
            bookContainer.appendChild(pageFlipContainer);
            
            // Create page corner folds
            const rightFold = document.createElement('div');
            rightFold.className = 'page-fold right-bottom';
            rightFold.addEventListener('click', nextPage);
            bookContainer.appendChild(rightFold);
            
            const leftFold = document.createElement('div');
            leftFold.className = 'page-fold left-bottom';
            leftFold.addEventListener('click', previousPage);
            bookContainer.appendChild(leftFold);
            
            // Create page turn sound
            const pageTurnSound = document.createElement('audio');
            pageTurnSound.innerHTML = `<source src="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA//tQwAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAASAAAeMwAUFBQUFCIiIiIiIjAwMDAwMD09PT09PUVFRUVFRVJSUlJSUmBgYGBgYG1tbW1tbXt7e3t7e4iIiIiIiJaWlpaWlqOjo6Ojo7CwsLCwsL29vb29vcvLy8vLy9jY2NjY2OXl5eXl5fLy8vLy8v///////wAAADxMQVZDNTguMTMuMTAyAAAAAAAAAAAAAAAkAkgAAP/7kGQAAAAAAAAAAAAAAAAAAAAAAFhpbmcAAAAPAAAADQAACZkAAgICAgICAgICAgICAgICAgICAgICAgICAgICDg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4OGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYKysrKysrKysrKysrKysrKysrKysrKysrKysrK0RERERERERERERERERERERERERERERERERERFdXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV2pqampqampqampqampqampqampqampqampqan19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX1//MUZAAANXtUyQkMABvPXqbgzgAF8AGZ5/kGeJ9nwTJ8D4Jv/E+D5PgjgThJ/8ToYLgQH/+KDkVKnRUmiXpGZ2dKVkh2h2dKMdGZq88QOEM8MYJCQ8N4GTwspdB0S0PQdEsUHQdB0HQdEsHQdB0HQdB0SwdB0HQdB0SxQdB0HQdB0SwdB0HQdB0HQdEsHQdB0HQdEsUHQdB0HQdEtD0PRLFEtD4GRphhIaZJ/k+sCQTfjCcXA8DwPE9DwPxPJvE8m8T4nwTeJwTeJwTeJwTeJwYnCcGJ8DYYtcWOC2GK3tMU9S6WpdepaWpdepaWpdi8tS7F5LEXlsXlsReVYYsljSWGLnFji5xY8lgiwRYIljSwRYIsESOKBHFAjjgRxwI48CQPAkDwJA8CQPA4Dw" type="audio/mp3">`;
            bookContainer.appendChild(pageTurnSound);
            
            // Initialize
            showPage(0);
            updatePageNumber();
            setupIndexLinks();
            
            if (prevCorner) prevCorner.addEventListener('click', previousPage);
            if (nextCorner) nextCorner.addEventListener('click', nextPage);
            
            setTimeout(() => {
                if (swipeInstruction) swipeInstruction.classList.add('hidden');
            }, 5000);
            
            document.addEventListener('keydown', (e) => {
                if (e.code === 'ArrowLeft') previousPage();
                if (e.code === 'ArrowRight') nextPage();
                if (e.key === 'Home') goToPage(0);
                if (e.key === 'End') goToPage(totalPages - 1);
                if (e.code === 'ArrowLeft' || e.code === 'ArrowRight') e.preventDefault();
            });
            
            let touchStartX = 0;
            document.addEventListener('touchstart', (e) => touchStartX = e.changedTouches[0].screenX);
            document.addEventListener('touchend', (e) => {
                const touchEndX = e.changedTouches[0].screenX;
                if (touchStartX - touchEndX > 50) nextPage();
                else if (touchEndX - touchStartX > 50) previousPage();
            });
            
            function showPage(pageIndex) {
                if (pageIndex < 0 || pageIndex >= totalPages) return false;
                pages.forEach((page, index) => {
                    page.classList.toggle('hidden', index !== pageIndex);
                });
                currentPage = pageIndex;
                return true;
            }
            
            function setupIndexLinks() {
                const indexItems = document.querySelectorAll('.index-page ol li');
                if (!indexItems.length) return;
                
                indexItems.forEach((item, index) => {
                    item.classList.add('index-link');
                    item.setAttribute('tabindex', '0');
                    const targetPage = index + 3;
                    
                    const navigate = () => {
                        if (targetPage >= 0 && targetPage < totalPages) {
                            goToPage(targetPage);
                        }
                    };

                    item.addEventListener('click', navigate);
                    item.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            navigate();
                        }
                    });
                });
            }
            
            function goToPage(targetPage) {
                if (isAnimating || targetPage === currentPage || targetPage < 0 || targetPage >= totalPages) return false;
                
                const jumpDistance = Math.abs(targetPage - currentPage);
                if (jumpDistance > 3) {
                    isAnimating = true;
                    if (showPage(targetPage)) {
                        updatePageNumber();
                        bookContainer.classList.add('quick-transition');
                        setTimeout(() => {
                            bookContainer.classList.remove('quick-transition');
                            isAnimating = false;
                        }, 300);
                    } else {
                        isAnimating = false;
                    }
                } else {
                    turnPagesSequence(targetPage, targetPage > currentPage ? 'forward' : 'backward');
                }
                return true;
            }
            
            function turnPagesSequence(targetPage, direction) {
                if (isAnimating) return;
                isAnimating = true;
                
                function turnNext() {
                    if ((direction === 'forward' && currentPage >= targetPage) || (direction === 'backward' && currentPage <= targetPage)) {
                        isAnimating = false;
                        return;
                    }
                    
                    if (direction === 'forward') nextPage(true);
                    else previousPage(true);
                    
                    setTimeout(turnNext, 650); // Slightly more than animation time
                }
                turnNext();
            }

            function nextPage(isSequence = false) {
                if ((isAnimating && !isSequence) || currentPage >= totalPages - 1) return false;
                
                if (!isSequence) isAnimating = true;
                performPageTurn(currentPage, 'right');
                
                setTimeout(() => {
                    if (showPage(currentPage + 1)) {
                        updatePageNumber();
                        playPageTurnSound();
                    }
                    if (!isSequence) setTimeout(() => isAnimating = false, 300);
                }, 300);
                return true;
            }

            function previousPage(isSequence = false) {
                if ((isAnimating && !isSequence) || currentPage <= 0) return false;
                
                if (!isSequence) isAnimating = true;
                performPageTurn(currentPage, 'left');
                
                setTimeout(() => {
                    if (showPage(currentPage - 1)) {
                        updatePageNumber();
                        playPageTurnSound();
                    }
                    if (!isSequence) setTimeout(() => isAnimating = false, 300);
                }, 300);
                return true;
            }

            function performPageTurn(pageIndex, direction) {
                pageFlipContainer.innerHTML = '';
                
                const flipper = document.createElement('div');
                flipper.className = 'page-flipper';
                
                const frontPage = document.createElement('div');
                frontPage.className = 'page-front';
                
                const backPage = document.createElement('div');
                backPage.className = 'page-back';
                
                const shadow = document.createElement('div');
                shadow.className = 'page-shadow';

                flipper.append(frontPage, backPage);
                pageFlipContainer.append(flipper, shadow);
                
                pageFlipContainer.classList.add(direction === 'right' ? 'turning-right' : 'turning-left');
                
                setTimeout(() => {
                    pageFlipContainer.innerHTML = '';
                    pageFlipContainer.className = 'page-flip-container';
                }, 1200);
            }
            
            function playPageTurnSound() {
                try {
                    pageTurnSound.currentTime = 0;
                    pageTurnSound.play().catch(() => {});
                } catch (e) {}
            }
            
            function updatePageNumber() {
                if (pageNumber) {
                    pageNumber.textContent = (currentPage > 0 && currentPage < totalPages - 1) ? `${currentPage} / ${totalPages - 2}` : '';
                }
                if (leftFold) leftFold.style.visibility = currentPage > 0 ? 'visible' : 'hidden';
                if (rightFold) rightFold.style.visibility = currentPage < totalPages - 1 ? 'visible' : 'hidden';
                if (prevCorner) prevCorner.style.visibility = currentPage > 0 ? 'visible' : 'hidden';
                if (nextCorner) nextCorner.style.visibility = currentPage < totalPages - 1 ? 'visible' : 'hidden';
            }

            console.log(`Book initialized with ${totalPages} pages.`);
        });
    </script>
</body>
</html>
